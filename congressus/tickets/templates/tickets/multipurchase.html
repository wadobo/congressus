{% extends "base.html" %}
{% load i18n %}
{% load bootstrap %}
{% load staticfiles %}

{% block title %}{{ ev }}{% endblock %}

{% block extrahead %}
    <style>
        .table > tbody > tr > th,
        .table > tbody > tr > td {
                 vertical-align: middle;
        }
        @-moz-document url-prefix() {
          fieldset { display: table-cell; }
        }
    </style>
    <link href="{% static "css/jquery.seat-charts.css" %}" rel="stylesheet"/>
    <link href="{% static "css/map.css" %}" rel="stylesheet"/>
{% endblock %}

{% block content %}
    <div class="page-header">
        <h1> {{ ev }} </h1>
    </div>

    <p> {{ ev.info }} </p>

    <form method="POST" action="">

    {% csrf_token %}
    <div class="row">
    {% for space in ev.spaces.all %}
        <div class="col-sm-6">
            <div class="panel panel-info">
                <div class="panel panel-heading">
                    {{ space.name }}
                </div>
                <div class="panel panel-body">
                    <table class="table table-striped">
                        {% for session in space.sessions.all %}
                            <tr>
                                <th width="60%"><label for="{{ session.id }}" class="control-label">{{ session.name }}</label></th>
                                {% if session.space.numbered %}
                                <td>
                                    {% include "tickets/seat_select.html" %}
                                    <input id="seats-{{ session.id }}" class="hidden" type="text" name="seats_{{ session.id }}" value=""/>
                                </td>
                                {% endif %}
                                <td>
                                    <div class="input-group">
                                        <input id="{{ session.id }}" class="sessioninput form-control" type="number" name="number_{{ session.id }}" value="0"/>
                                        <span class="input-group-addon" id="basic-addon2">{{ session.price }} â‚¬</span>
                                    </div>
                                </td>

                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
    {% endfor %}
    </div>

    <fieldset>
        <legend>{% trans "Personal info" %}:</legend>
        <div class="reg-form">
            {{ form|bootstrap }}
        </div>
    </fieldset>

    <button class="btn btn-primary btn-block btn-lg">{% trans "Continue" %}</button>

    </form>

    <div id="restrictions" class="hidden">
        {% for w in ev.warnings.all %}
            <div class="warning"
                data-name="{{ w.name }}"
                data-sessions1="{{ w.sessions1_ids }}"
                data-sessions2="{{ w.sessions2_ids }}"
                data-type="{{ w.type }}"
                data-message="{{ w.message }}"></div>
        {% endfor %}
    </div>
{% endblock %}

{% block extrabody %}
    <script src="{% static "js/jquery-1.12.3.min.js" %}"></script>
    <script src="{% static "js/jquery.seat-charts.min.js" %}"></script>
    <script src="{% static "js/map.js" %}"></script>

    <script src="{% static 'js/multipurchase.js' %}"></script>
{% endblock %}
